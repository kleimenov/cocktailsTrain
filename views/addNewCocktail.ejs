<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
        <link rel="stylesheet" href="/styles/style.css">
        <title>webApp</title>
    </head>
<body>
    <%- include('partials/_header') %>
    <main class="addNew-main">
      <div class="container">
        <div>
          <h3 class="text-white text-center pt-2">Create new cocktail</h3>
            <form  action="/cocktails" method="POST">
              <div class="d-flex flex-column form-group ml-0 mb-2">
                <div class="text-white mt-2 h3">Add new cocktail name:
                  <label for="cocktailName"></label>
                  <input class="form-control ml-0" id="cocktailName" type="text" name="cocktailName" placeholder="Cocktail name" style="width: 300px; margin: 1em">
                </div>
                <fieldset class="text-aqua mt-2 h3">
                  <h3 class="text-white mb-3">Add cocktail ingredients:</h3>
                  <div id="ingredients-field">
                   <div class="d-flex flex-row form-inline">
                      <input class="form-control mr-1" type="text" name="ingredient" placeholder="Ingredient">
                      <input class="form-control" type="text" name="amount" placeholder="Amount">
                   </div>
                  </div>
                  <button type="button" class="mt-2 text-white add-cocktail-button" id="addIngredient">+ingredient</button>
                </fieldset>
                  <button type="submit" class="add-cocktail-button text-white" style="width: 150px">Submit</button>
              </div>
            </form> 
        </div>
      </div>
    </main>
    <%- include('partials/_footer') %>
    <script>
        const createIngredientField = () => {
            let ingredientFieldContainer = document.createElement("div");
            let addAttributesDiv = [ "d-flex", "flex-row", "form-inline"];
            let addAttributesInput = ["form-control", "mt-1", "mr-1"];
            
            for (let index in addAttributesDiv) {
              ingredientFieldContainer.classList.add(addAttributesDiv[index])
            }

            let ingredientNameField = document.createElement("input");
            for (let index in addAttributesInput) {
              ingredientNameField.classList.add(addAttributesInput[index])
            }
            ingredientNameField.name = `ingredient`;
            ingredientNameField.placeholder = `Ingredient`;

            let ingredientAmountField = document.createElement("input");
            for (let index in addAttributesInput) {
              ingredientAmountField.classList.add(addAttributesInput[index])
            }

            ingredientAmountField.name = `amount`;
            ingredientAmountField.placeholder = `Amount`;
            ingredientFieldContainer.appendChild(ingredientNameField);
            ingredientFieldContainer.appendChild(ingredientAmountField);
            const ingredientsBox = document.getElementById('ingredients-field');
            ingredientsBox.appendChild(ingredientFieldContainer);

        }
        const addIngredient = document.getElementById('addIngredient');
        addIngredient.addEventListener('click', createIngredientField);
    </script>
</body>
</html>